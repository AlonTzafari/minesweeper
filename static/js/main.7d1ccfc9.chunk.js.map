{"version":3,"sources":["components/Loader/index.js","components/Loader/Loader.js","contexts/gameContext.js","pages/Menu/index.js","pages/Menu/Menu.js","components/GameInfo/index.js","components/GameInfo/GameInfo.js","components/Tile/index.js","components/Tile/Tile.js","components/GameBoard/index.js","components/GameBoard/GameBoard.js","logic/Game.js","logic/createMatrix.js","pages/Game/index.js","pages/Game/Game.js","App.js","reportWebVitals.js","index.js"],"names":["Loader","className","gameContext","createContext","Provider","Menu","useContext","setStart","gameConfig","setGameConfig","useState","width","setWidth","height","setHeight","maxMines","setMaxMines","loading","setLoading","widthRef","useRef","heightRef","minesRef","supermanRef","useEffect","current","value","mines","checked","superman","name","onSubmit","e","config","Number","setTimeout","preventDefault","htmlFor","ref","onChange","currentTarget","type","id","min","max","step","required","GameInfo","flags","endGame","onClick","Tile","tileValue","tile","reveal","flag","shortCB","longCB","duration","timer","isCancel","Date","elapsedTime","producer","startHandler","endHandler","moveHandler","shiftKey","onTouchStart","onTouchEnd","onTouchMove","state","GameBoard","game","update","cellSpacing","cellPadding","board","map","row","y","x","Game","this","flagsLeft","minesLeft","fillValue","Array","fill","createMatrix","mineLocations","placeMinesRandomly","calculateTileValues","onLose","stack","length","args","pop","floodReveal","push","onWin","noFlags","numMines","minesToPlace","Math","floor","random","tilesAround","minePos","tilePos","tileAtPos","GameClass","alert","updateState","setUpdate","App","start","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7d1ccfc9.chunk.js","sourcesContent":["import Loader from './Loader';\r\n\r\nexport default Loader;","import './Loader.scss';\r\n\r\nexport default function Loader() {\r\n    return (\r\n        <div className=\"loader\">\r\n            Loading...\r\n        </div>\r\n    )\r\n}\r\n","import {createContext} from 'react';\r\n\r\nconst gameContext = createContext();\r\nexport default gameContext;\r\nexport const gameProvider = gameContext.Provider;","import Menu from './Menu';\r\n\r\nexport default Menu;","import \"./Menu.scss\";\r\nimport { useContext, useRef, useState, useEffect } from \"react\";\r\nimport Loader from '../../components/Loader';\r\nimport gameContext from \"../../contexts/gameContext\";\r\n\r\nexport default function Menu() {\r\n    const { setStart, gameConfig, setGameConfig } = useContext(gameContext);\r\n    const [width, setWidth] = useState(gameConfig.width);\r\n    const [height, setHeight] = useState(gameConfig.height);\r\n    const [maxMines, setMaxMines] = useState(16);\r\n    const [loading, setLoading] = useState(false);\r\n    const widthRef = useRef();\r\n    const heightRef = useRef();\r\n    const minesRef = useRef();\r\n    const supermanRef = useRef();\r\n\r\n    const submitHandler = (e) => {\r\n        const config = {\r\n            width,\r\n            height,\r\n            mines: Number(minesRef.current.value),\r\n            superman: supermanRef.current.checked,\r\n        };\r\n        setGameConfig(config);\r\n        setLoading(true);\r\n        setTimeout(() => {\r\n            setStart(true);\r\n        }, 100);\r\n        e.preventDefault();\r\n    };\r\n\r\n    const onWidthChange = (e) => {\r\n        setWidth(Number(e.currentTarget.value));\r\n    };\r\n    const onHeightChange = (e) => {\r\n        setHeight(Number(e.currentTarget.value));\r\n    };\r\n\r\n    useEffect(() => {\r\n        setWidth(gameConfig.width);\r\n        setHeight(gameConfig.height);\r\n        widthRef.current.value = gameConfig.width;\r\n        heightRef.current.value = gameConfig.height;\r\n        minesRef.current.value = gameConfig.mines;\r\n        supermanRef.current.checked = gameConfig.superman;\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        setMaxMines(width * height);\r\n    }, [width, height]);\r\n\r\n    return (\r\n        <div data-testid=\"menu\" className=\"menu page\">\r\n            <form name=\"menu-options\" onSubmit={submitHandler}>\r\n                <h2>Minesweeper</h2>\r\n                <label htmlFor=\"width\">Width</label>\r\n                <input\r\n                    ref={widthRef}\r\n                    onChange={onWidthChange}\r\n                    type=\"number\"\r\n                    id=\"width\"\r\n                    name=\"width\"\r\n                    min=\"4\"\r\n                    max=\"300\"\r\n                    step=\"1\"\r\n                    required\r\n                />\r\n                <label htmlFor=\"height\">Height</label>\r\n                <input\r\n                    ref={heightRef}\r\n                    onChange={onHeightChange}\r\n                    type=\"number\"\r\n                    id=\"height\"\r\n                    name=\"height\"\r\n                    min=\"4\"\r\n                    max=\"300\"\r\n                    step=\"1\"\r\n                    required\r\n                />\r\n                <label htmlFor=\"mines\">Mines</label>\r\n                <input\r\n                    ref={minesRef}\r\n                    type=\"number\"\r\n                    id=\"mines\"\r\n                    name=\"mines\"\r\n                    min=\"1\"\r\n                    max={`${maxMines}`}\r\n                    step=\"1\"\r\n                    required\r\n                />\r\n                <label htmlFor=\"superman\">Superman Mode</label>\r\n                <input\r\n                    ref={supermanRef}\r\n                    type=\"checkbox\"\r\n                    id=\"superman\"\r\n                    name=\"superman\"\r\n                />\r\n                <div className=\"btnContainer\">\r\n                    {\r\n                        loading ? <Loader/> :\r\n                        <button type=\"submit\">START</button>\r\n                    }\r\n                </div>\r\n            </form>\r\n            <div className=\"tutorial\">\r\n                <p>to place a flag</p>\r\n                <p>keyboard: shift+leftClick</p>\r\n                <p>mobile: long press</p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import GameInfo from './GameInfo';\r\n\r\nexport default GameInfo;","import \"./GameInfo.scss\";\r\n\r\nexport default function GameInfo({ flags, endGame }) {\r\n    return (\r\n        <header className=\"gameInfo\">\r\n            <span>{`flags: ${flags}ðŸš©`}</span>\r\n            <button onClick={endGame}>End Game</button>\r\n        </header>\r\n    );\r\n}\r\n","import Tile from './Tile';\r\n\r\nexport default Tile;","import \"./Tile.scss\";\r\n\r\nexport default function Tile({ tile, superman, reveal, flag }) {\r\n    const onClick = (e) => {\r\n        if (e.shiftKey) flag();\r\n        else reveal();\r\n        e.preventDefault();\r\n    };\r\n\r\n    const producer = (shortCB, longCB, duration) => {\r\n        let timer;\r\n        let isCancel;\r\n        const start = () => {\r\n            isCancel = false;\r\n            timer = new Date();\r\n        };\r\n        const end = () => {\r\n            const elapsedTime = new Date() - timer;\r\n            if (isCancel) {\r\n            } else if (elapsedTime >= duration) longCB();\r\n            else shortCB();\r\n        };\r\n        const cancel = () => {\r\n            isCancel = true;\r\n        };\r\n        return [start, end, cancel];\r\n    };\r\n\r\n    const [startHandler, endHandler, moveHandler] = producer(reveal, flag, 400);\r\n\r\n    const tileDisplay = (tileValue) => {\r\n        if (tileValue === 0) return \"\";\r\n        if (tileValue === \"bomb\") return \"ðŸ’£\";\r\n        if (typeof tileValue === \"number\" && tileValue > 0) return tileValue;\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className=\"tile\"\r\n            onClick={onClick}\r\n            onTouchStart={startHandler}\r\n            onTouchEnd={endHandler}\r\n            onTouchMove={moveHandler}\r\n        >\r\n            <span className=\"content\">{tileDisplay(tile.value)}</span>\r\n            {tile.state !== \"visible\" ? (\r\n                <span className={`cover ${superman ? \"transparent\" : null}`}>\r\n                    {tile.state === \"flag\" ? \"ðŸš©\" : null}\r\n                </span>\r\n            ) : null}\r\n        </div>\r\n    );\r\n}\r\n","import GameBoard from './GameBoard';\r\n\r\nexport default GameBoard;","import \"./GameBoard.scss\";\r\nimport Tile from \"../Tile\";\r\n\r\nexport default function GameBoard({ game, update }) {\r\n    return (\r\n        <div className=\"gameBoard\">\r\n            <table cellSpacing=\"0\" cellPadding=\"0\">\r\n                <tbody>\r\n                    {game.board.map((row, y) => {\r\n                        return (\r\n                            <tr key={y}>\r\n                                {row.map((tile, x) => {\r\n                                    const reveal = () => {\r\n                                        game.reveal(x, y);\r\n                                        update();\r\n                                    };\r\n                                    const flag = () => {\r\n                                        game.flag(x, y);\r\n                                        update();\r\n                                    };\r\n                                    return (\r\n                                        <td key={x}>\r\n                                            <Tile\r\n                                                tile={tile}\r\n                                                superman={game.superman}\r\n                                                reveal={reveal}\r\n                                                flag={flag}\r\n                                            />\r\n                                        </td>\r\n                                    );\r\n                                })}\r\n                            </tr>\r\n                        );\r\n                    })}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n}\r\n","import createMatrix from \"./createMatrix\";\r\n\r\nexport default class Game {\r\n    board;\r\n    flagsLeft;\r\n    minesLeft;\r\n    superman;\r\n    onLose;\r\n    onWin;\r\n    noFlags;\r\n\r\n    constructor(config) {\r\n        const { width, height, mines, superman } = config;\r\n\r\n        this.flagsLeft = mines;\r\n        this.superman = superman;\r\n        this.minesLeft = mines;\r\n\r\n        this.board = createMatrix(width, height, () => {\r\n            return { state: \"hidden\", value: 0 };\r\n        });\r\n        const mineLocations = this.placeMinesRandomly(mines);\r\n        this.calculateTileValues(mineLocations);\r\n    }\r\n\r\n    reveal(x, y) {\r\n        const tile = this.board[y][x];\r\n        if (tile.state === \"visible\" || tile.state === \"flag\") return;\r\n\r\n        if (tile.value === \"bomb\") {\r\n            tile.state = \"visible\";\r\n            this.onLose();\r\n        } else if (typeof tile.value === \"number\" && tile.value > 0) {\r\n            tile.state = \"visible\";\r\n        } else {\r\n            const stack = [[x, y]];\r\n            while (stack.length > 0) {\r\n                const args = stack.pop();\r\n                floodReveal(this.board, ...args, stack);\r\n            }\r\n        }\r\n\r\n        function floodReveal(board, x, y, stack) {\r\n            if (x < 0 || x >= board[0].length) return;\r\n            if (y < 0 || y >= board.length) return;\r\n            const tile = board[y][x];\r\n            if (tile.value === \"bomb\") return;\r\n            if (typeof tile.value === \"number\" && tile.value > 0) {\r\n                tile.state = \"visible\";\r\n                return;\r\n            }\r\n            if (tile.state === \"visible\") return;\r\n            tile.state = \"visible\";\r\n            stack.push([x - 1, y]);\r\n            stack.push([x + 1, y]);\r\n            stack.push([x, y - 1]);\r\n            stack.push([x, y + 1]);\r\n        }\r\n    }\r\n\r\n    flag(x, y) {\r\n        const tile = this.board[y][x];\r\n        if (tile.state === \"visible\") return;\r\n        if (tile.state === \"flag\") {\r\n            tile.state = \"hidden\";\r\n            this.flagsLeft++;\r\n            return;\r\n        }\r\n        if (this.flagsLeft === 0) {\r\n            this.noFlags();\r\n            return;\r\n        }\r\n        tile.state = \"flag\";\r\n        this.flagsLeft--;\r\n        if (tile.value === \"bomb\") {\r\n            this.minesLeft--;\r\n            if (this.minesLeft === 0) this.onWin();\r\n        }\r\n    }\r\n\r\n    placeMinesRandomly(numMines) {\r\n        const mineLocations = [];\r\n        let minesToPlace = numMines;\r\n        while (minesToPlace > 0) {\r\n            const x = Math.floor(Math.random() * this.board[0].length);\r\n            const y = Math.floor(Math.random() * this.board.length);\r\n            const tile = this.board[y][x];\r\n            if (tile.value === \"bomb\") continue;\r\n            this.board[y][x].value = \"bomb\";\r\n            minesToPlace--;\r\n            mineLocations.push({ x, y });\r\n        }\r\n        return mineLocations;\r\n    }\r\n\r\n    calculateTileValues(mineLocations) {\r\n        const height = this.board.length;\r\n        const width = this.board[0].length;\r\n\r\n        const tilesAround = [\r\n            { x: -1, y: -1 },\r\n            { x: 0, y: -1 },\r\n            { x: 1, y: -1 },\r\n            { x: -1, y: 0 },\r\n            { x: 1, y: 0 },\r\n            { x: -1, y: 1 },\r\n            { x: 0, y: 1 },\r\n            { x: 1, y: 1 },\r\n        ];\r\n\r\n        for (const minePos of mineLocations) {\r\n            for (const tilePos of tilesAround) {\r\n                const x = tilePos.x + minePos.x;\r\n                const y = tilePos.y + minePos.y;\r\n                if (x < 0 || x >= width) continue;\r\n                if (y < 0 || y >= height) continue;\r\n                const tileAtPos = this.board[y][x];\r\n                if (tileAtPos.value === \"bomb\") continue;\r\n                tileAtPos.value++;\r\n            }\r\n        }\r\n    }\r\n}\r\n","export default function createMatrix(width, height, fillValue) {\r\n    return new Array(height).fill(0).map(() => {\r\n        const widthArr = new Array(width).fill(0);\r\n        return widthArr.map(() => {\r\n            return fillValue();\r\n        });\r\n    });\r\n}\r\n","import Game from './Game';\r\n\r\nexport default Game;","import { useState, useContext } from \"react\";\r\nimport GameInfo from \"../../components/GameInfo\";\r\nimport GameBoard from \"../../components/GameBoard\";\r\nimport GameClass from \"../../logic/Game\";\r\nimport gameContext from \"../../contexts/gameContext\";\r\n\r\nexport default function Game() {\r\n    const { setStart, gameConfig } = useContext(gameContext);\r\n\r\n    const [game] = useState(() => new GameClass(gameConfig));\r\n\r\n    game.onLose = () =>\r\n        setTimeout(() => {\r\n            alert(\"You Lost!\");\r\n            setStart(false);\r\n        }, 200);\r\n\r\n    game.onWin = () =>\r\n        setTimeout(() => {\r\n            alert(\"You Win!\");\r\n            setStart(false);\r\n        }, 200);\r\n\r\n    game.noFlags = () => alert(\"No Flags Left!\");\r\n\r\n    const [updateState, setUpdate] = useState(0);\r\n    const update = () => {\r\n        setUpdate(1 - updateState);\r\n    };\r\n\r\n    const endGame = () => {\r\n        setStart(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"page\" data-testid=\"game\">\r\n            <GameInfo flags={game.flagsLeft} endGame={endGame} />\r\n            <GameBoard game={game} update={update} />\r\n        </div>\r\n    );\r\n}\r\n","import \"./App.scss\";\nimport { useState } from \"react\";\nimport Menu from \"./pages/Menu\";\nimport Game from \"./pages/Game\";\nimport gameContext from \"./contexts/gameContext\";\n\nfunction App() {\n    const [start, setStart] = useState(false);\n    const [gameConfig, setGameConfig] = useState({\n        width: 8,\n        height: 8,\n        mines: 8,\n        superman: false,\n    });\n\n    return (\n        <gameContext.Provider\n            value={{ start, setStart, gameConfig, setGameConfig }}\n        >\n            <div className=\"App\">{start ? <Game /> : <Menu />}</div>\n        </gameContext.Provider>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}