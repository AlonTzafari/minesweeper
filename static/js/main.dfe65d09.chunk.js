(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],[,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(4),s=n.n(r),c=(n(11),n(2)),u=(n(12),Object(a.createContext)()),l=u,o=(u.Provider,n(13),n(0));var f=function(){var e=Object(a.useContext)(l),t=e.setStart,n=e.gameConfig,i=e.setGameConfig,r=Object(a.useState)(n.width),s=Object(c.a)(r,2),u=s[0],f=s[1],b=Object(a.useState)(n.height),h=Object(c.a)(b,2),j=h[0],d=h[1],m=Object(a.useState)(16),v=Object(c.a)(m,2),g=v[0],O=v[1],p=Object(a.useRef)(),x=Object(a.useRef)();return Object(a.useEffect)((function(){f(n.width),d(n.height),p.current.value=n.mines,x.current.checked=n.superman}),[]),Object(a.useEffect)((function(){O(u*j)}),[u,j]),Object(o.jsx)("div",{"data-testid":"menu",className:"menu page",children:Object(o.jsxs)("form",{name:"menu-options",onSubmit:function(e){var n={width:u,height:j,mines:Number(p.current.value),superman:x.current.checked};i(n),t(!0),e.preventDefault()},children:[Object(o.jsx)("h2",{children:"Minesweeper"}),Object(o.jsx)("label",{htmlFor:"width",children:"Width"}),Object(o.jsx)("input",{onChange:function(e){f(Number(e.currentTarget.value))},type:"number",id:"width",name:"width",min:"4",max:"300",step:"1",value:u,required:!0}),Object(o.jsx)("label",{htmlFor:"height",children:"Height"}),Object(o.jsx)("input",{onChange:function(e){d(Number(e.currentTarget.value))},type:"number",id:"height",name:"height",min:"4",max:"300",step:"1",value:j,required:!0}),Object(o.jsx)("label",{htmlFor:"mines",children:"Mines"}),Object(o.jsx)("input",{ref:p,type:"number",id:"mines",name:"mines",min:"1",max:"".concat(g),step:"1",required:!0}),Object(o.jsx)("label",{htmlFor:"superman",children:"Superman Mode"}),Object(o.jsx)("input",{ref:x,type:"checkbox",id:"superman",name:"superman"}),Object(o.jsx)("div",{className:"btnContainer",children:Object(o.jsx)("button",{type:"submit",children:"START"})})]})})};n(15);var b=function(e){var t=e.flags,n=e.endGame;return Object(o.jsxs)("header",{className:"gameInfo",children:[Object(o.jsx)("span",{children:"flags: ".concat(t,"\ud83d\udea9")}),Object(o.jsx)("button",{onClick:n,children:"End Game"})]})};n(16);var h=function(e){var t=e.tile,n=e.superman,a=e.reveal,i=e.flag;return Object(o.jsxs)("div",{className:"tile",onClick:function(e){e.shiftKey?i():a(),e.preventDefault()},children:[Object(o.jsx)("span",{className:"content",children:0===t.value?"":t.value}),"visible"!==t.state?Object(o.jsx)("span",{className:"cover ".concat(n?"transparent":null),children:"flag"===t.state?"\ud83d\udea9":null}):null]})};n(17);var j=function(e){var t=e.game,n=e.update;return Object(o.jsx)("div",{className:"gameBoard",children:Object(o.jsx)("table",{cellSpacing:"0",cellPadding:"0",children:Object(o.jsx)("tbody",{children:t.board.map((function(e,a){return Object(o.jsx)("tr",{children:e.map((function(e,i){return Object(o.jsx)("td",{children:Object(o.jsx)(h,{tile:e,superman:t.superman,reveal:function(){t.reveal(i,a),n()},flag:function(){t.flag(i,a),n()}})},i)}))},a)}))})})})},d=n(5),m=n(6),v=function(){function e(t){Object(d.a)(this,e);for(var n=t.width,a=t.height,i=t.mines,r=t.superman,s=new Array(a).fill(0).map((function(){return new Array(n).fill(0).map((function(){return{state:"hidden",value:0}}))})),c=i;c>0;){var u=Math.floor(Math.random()*n),l=Math.floor(Math.random()*a);"\ud83d\udca3"!==s[l][u].value&&(s[l][u]={state:"hidden",value:"\ud83d\udca3"},c--)}for(var o=0;o<a;o++)for(var f=0;f<n;f++){if("\ud83d\udca3"!==s[o][f].value){for(var b=0,h=0,j=[{x:f-1,y:o-1},{x:f,y:o-1},{x:f+1,y:o-1},{x:f-1,y:o},{x:f+1,y:o},{x:f-1,y:o+1},{x:f,y:o+1},{x:f+1,y:o+1}];h<j.length;h++){var m=j[h];m.x<0||m.x>=n||(m.y<0||m.y>=a||(b+="\ud83d\udca3"===s[m.y][m.x].value?1:0))}s[o][f].value=b}}this.board=s,this.flagsLeft=i,this.superman=r,this.minesLeft=i}return Object(m.a)(e,[{key:"reveal",value:function(e,t){var n=this.board[t][e];"visible"!==n.state&&"flag"!==n.state&&("\ud83d\udca3"===n.value?(n.state="visible",this.onLose()):"number"===typeof n.value&&n.value>0?n.state="visible":function e(t,n,a){if(n<0||n>=t[0].length)return;if(a<0||a>=t.length)return;var i=t[a][n];if("\ud83d\udca3"===i.value)return;if("number"===typeof i.value&&i.value>0)return void(i.state="visible");if("visible"===i.state)return;i.state="visible",e(t,n-1,a),e(t,n+1,a),e(t,n,a-1),e(t,n,a+1)}(this.board,e,t))}},{key:"flag",value:function(e,t){var n=this.board[t][e];if("visible"!==n.state)return"flag"===n.state?(n.state="hidden",void this.flagsLeft++):void(0!==this.flagsLeft?(n.state="flag",this.flagsLeft--,"\ud83d\udca3"===n.value&&(this.minesLeft--,0===this.minesLeft&&this.onWin())):this.noFlags())}}]),e}();var g=function(){var e=Object(a.useContext)(l),t=e.setStart,n=e.gameConfig,i=Object(a.useState)(new v(n)),r=Object(c.a)(i,1)[0];r.onLose=function(){return setTimeout((function(){alert("You Lost!"),t(!1)}),200)},r.onWin=function(){return setTimeout((function(){alert("You Win!"),t(!1)}),200)},r.noFlags=function(){return alert("No Flags Left!")};var s=Object(a.useState)(0),u=Object(c.a)(s,2),f=u[0],h=u[1];return Object(o.jsxs)("div",{className:"page","data-testid":"game",children:[Object(o.jsx)(b,{flags:r.flagsLeft,endGame:function(){t(!1)}}),Object(o.jsx)(j,{game:r,update:function(){h(1-f)}}),null]})};var O=function(){var e=Object(a.useState)(!1),t=Object(c.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)({width:8,height:8,mines:8,superman:!1}),s=Object(c.a)(r,2),u=s[0],b=s[1];return Object(o.jsx)(l.Provider,{value:{start:n,setStart:i,gameConfig:u,setGameConfig:b},children:Object(o.jsx)("div",{className:"App",children:n?Object(o.jsx)(g,{}):Object(o.jsx)(f,{})})})},p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),r(e),s(e)}))};s.a.render(Object(o.jsx)(i.a.StrictMode,{children:Object(o.jsx)(O,{})}),document.getElementById("root")),p()}],[[18,1,2]]]);
//# sourceMappingURL=main.dfe65d09.chunk.js.map